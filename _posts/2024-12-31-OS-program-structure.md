---
title: KOCW_Computer System Structure / Kernel / Interrupt / System Call
categories: [Computer Science, Computer Architecture/Operating System]
tags: [] # TAG names should always be lowercase
---

## β… μ»΄ν“¨ν„° μ‹μ¤ν… κµ¬μ΅°

- μ»΄ν“¨ν„° λ¶€ν…
- μ΄μμ²΄μ λ” λ©”λ¨λ¦¬μ— μ¬λΌκ°
- ν”„λ΅κ·Έλ¨μ€ λ””μ¤ν¬μ— μ €μ¥λμ–΄ μλ‹¤κ°€ μ‹¤ν–‰λλ©΄ λ©”λ¨λ¦¬μ— μ¬λΌκ°

- I/O μ¥μΉμ—λ” κ·Έλ“¤λ§μ CPUκ°€ μλ”λ°, μ΄λ¥Ό `λ””λ°”μ΄μ¤ μ»¨λ“λ΅¤λ¬`λΌκ³  ν•λ‹¤.

- μ΄μμ²΄μ κ°€ CPUλ¥Ό μ“Έ λ–„λ” λ¬Έμ κ°€ μ—†λ”λ°,
- μ‘μ© ν”„λ΅κ·Έλ¨μ΄ CPUλ¥Ό μ‚¬μ©ν•  λ–„λ” λ¬Έμ κ°€ μƒκΈΈ μ μλ‹¤. (μλ¥Ό λ“¤μ–΄ CPUλ¥Ό κ³„μ† μ΅μ•„λ¨Ήλ” μ—°μ‚°μ„ ν•λ‹¤κ±°λ‚..)
- κ·Έλμ„ μ΄μμ²΄μ κ°€ CPUλ¥Ό μ“°λ”κ±΄μ§€ π† μ‘μ© ν”„λ΅κ·Έλ¨μ΄ μ“°λ” κ±΄μ§€ κµ¬λ³„ν•  ν•„μ”κ°€ μλ‹¤.

## π’΅ Device Controller

- κ° ν•λ“μ›¨μ–΄, I/O λ””λ°”μ΄μ¤μ— λ¶™μ–΄μλ” κ°κ°μ μ‘μ€ CPU
- μμ‹: λ©”λ¨λ¦¬μ— λ¶™μ–΄μλ” λ©”λ¨λ¦¬ μ»¨νΈλ΅¤λ¬, λ””μ¤ν¬μ— λ¶™μ–΄μλ” λ””μ¤ν¬ μ»¨νΈλ΅¤λ¬

- μ‹¤μ  I/Oμ‘μ—…μ€ Device Controllerλ¥Ό ν†µν•΄μ„ λ””λ°”μ΄μ¤μ— μ „λ‹¬λλ‹¤.
- ν•λ“μ›¨μ–΄
- μ μ–΄ μ •λ³΄λ¥Ό μ„ν•΄ `control register`, `status register`μ„ κ°€μ§„λ‹¤.
- `local buffer`μ„ κ°€μ§„λ‹¤. (μΌμΆ…μ `data register`, μ„μ‹μ €μ¥)
- `I/O`λ” μ‹¤μ  `device`μ™€ `local buffer` μ‚¬μ΄μ—μ„ μΌμ–΄λ‚λ‹¤.
- Device Controllerλ” `I/O`κ°€ λλ‚λ©΄ `interrupt`λ΅ CPUμ— κ·Έ μ‚¬μ‹¤μ„ μ•λ¦°λ‹¤.

- Device Controller μ•μ—μ„ μ‚¬μ©λλ” λ…λ Ήμ–΄λ” `firmware`λΌκ³  λ¶λ¦°λ‹¤.

### π† Device Driver

> CPUκ°€ deviceμ—κ² I/Oλ¥Ό λ¶€νƒν•  λ• μ“°μ΄λ” λ…λ Ήμ–΄

- CPUκ°€ μν–‰ν•λ” μ½”λ“

## π’΅ Mode bit

> CPUλ¥Ό μ΄μμ²΄μ κ°€ μ“°λ” κ±΄μ§€, μ‘μ© ν”„λ΅κ·Έλ¨μ΄ μ“°λ”κ±΄μ§€ **κµ¬λ³„ν•κΈ°** μ„ν• μ¥μΉ

- μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ μλ»λ μν–‰μΌλ΅ λ‹¤λ¥Έ ν”„λ΅κ·Έλ¨/μ΄μμ²΄μ μ— ν”Όν•΄κ°€ κ° μ μλ‹¤.
- κ·Έλμ„ μ΄μμ²΄μ κ°€ CPUλ¥Ό μ“°λ”κ±΄μ§€ π† μ‘μ© ν”„λ΅κ·Έλ¨μ΄ μ“°λ” κ±΄μ§€ κµ¬λ³„μ„ ν•΄μ•Ό ν•¨
- μ΄ μ¥μΉκ°€ λ°”λ΅ `mode bit`

- `mode bit`μ„ ν†µν•΄ ν•λ“μ›¨μ–΄μ μΌλ΅ λ‘ κ°€μ§€ λ¨λ“μ operation μ§€μ›

  - `0`: λ¨λ‹ν„° λ¨λ“(μ»¤λ„ λ¨λ“, μ‹μ¤ν… λ¨λ“), OSμ½”λ“ μ‹¤ν–‰
  - `1`: μ‚¬μ©μ λ¨λ“, μ‚¬μ©μ ν”„λ΅κ·Έλ¨ μν–‰

- λ³΄μ•μ„ ν•΄μΉ  μ μλ” μ¤‘μ”ν• λ…λ Ήμ–΄λ” `0, λ¨λ‹ν„° λ¨λ“`μ—μ„λ§ μν–‰ κ°€λ¥
- `interrupt`, `exception` λ°μƒ μ‹ `0, λ¨λ‹ν„° λ¨λ“` λ΅ λ³€κ²½
- μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ—κ² CPUλ¥Ό λ„κΈΈ λ•λ” `1, μ‚¬μ©μ λ¨λ“`λ΅ modebitμ„ λ°”κΏ”μ„ λ„κΈ΄λ‹¤.

<img width="420" alt="Screenshot 2025-01-01 at 12 14 44" src="https://github.com/user-attachments/assets/fae20ad1-2e6f-4552-ab96-17c865062465" />

## π’΅ Program Counter

- `Program counter, PC`: CPUκ°€ μ‹¤ν–‰ν•  λ…λ Ήμ λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό λ‹΄κ³  μλ” λ μ§€μ¤ν„°
- κΈ°κ³„μ–΄ μ‹¤ν–‰ ν›„μ—λ” λ‹¤μ μ„μΉλ¥Ό κ°€λ¦¬ν‚¤κ³  β΅οΈ λ λ‹¤μ μ„μΉ

## π’΅ Timer

> μ΄μμ²΄μ μ™€ ν‘λ ¥ν•΄ νΉμ • ν”„λ΅κ·Έλ¨μ CPU λ…μ μ„ λ§‰κΈ° μ„ν• μ¥μΉ

- μ–΄λ–¤ μ‘μ© ν”„λ΅κ·Έλ¨μ΄ CPUλ¥Ό μ¤λ«λ™μ• λ…μ‹ν•λ©° λ‹¤λ¥Έ ν”„λ΅κ·Έλ¨μ— ν”Όν•΄π‘π»
- μ΄ λ• μ΄μμ²΄μ κ°€ CPUλ¥Ό λ‹¤μ‹ λλ ¤λ‹¬λΌκ³  λΉΌμ•—μ•„μ™€μ•Ό ν•¨
- ν•μ§€λ§ μ΄μμ²΄μ λ” CPUλ¥Ό μ£Όλ” κ±΄ λ§μλ€λ΅ ν•  μ μμ–΄λ„,
- νΌμ νμΌλ΅ λΉΌμ•—μ•„ μ¬ μλ” μ—†μ!
- μ΄ λ• ν•„μ”ν• κ²ƒμ΄ `timer`

- `timer`λ” μΌμ •μ‹κ°„λ§λ‹¤ `interrupt`λ¥Ό λ°μƒμ‹ν‚¨λ‹¤.
- μ΄μμ²΄μ κ°€ μ‘μ© ν”„λ΅κ·Έλ¨μ—κ² CPUλ¥Ό λ„κΈΈ λ•, `timer`λ¥Ό λ§μ¶”κ³  λ„κ²¨μ¤€λ‹¤.
- κ·Έλμ„ μΌμ • μ‹κ°„μ΄ μ§€λ‚λ©΄ μ΄μμ²΄μ μ—κ² `interrupt`κ°€ λ°μƒν•κ² λ¨ β΅οΈ μ‘μ© ν”„λ΅κ·Έλ¨μ CPUλ…μ μ„ λ§‰μ

## β… CPU μ—°μ‚°κ³Ό I/Oμ—°μ‚°

- **μ»΄ν“¨ν„°κ°€ λ°μ΄ν„°λ¥Ό μ½λ” κ³Όμ •**
- β΅οΈ μ™Έλ¶€ μ¥μΉ(I/O)
- β΅οΈ `local buffer` μ„μ‹μ €μ¥
- β΅οΈ λ©”λ¨λ¦¬
- β΅οΈ CPU

## β… μ»΄ν“¨ν„° μ‹μ¤ν…μ μ‘λ™ κ°μ”

- CPUλ” λ§¤ μ‹μ  λ©”λ¨λ¦¬μ νΉμ • μ£Όμ†μ— μ΅΄μ¬ν•λ” λ…λ Ήμ„ ν•λ‚μ”© μ½μ–΄μ™€ μν–‰ν•λ‹¤.
- μ΄ λ• CPUκ°€ μν–‰ν•΄μ•Ό ν•  **λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό λ‹΄κ³  μλ” λ μ§€μ¤ν„°**λ¥Ό ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„° `Program counter, PC`λΌκ³  ν•λ‹¤.
- μ¦‰, CPUλ” λ§¤λ² ν”„λ΅κ·Έλ¨ μΉ΄μ΄ν„°κ°€ κ°€λ¦¬ν‚¤λ” λ©”λ¨λ¦¬ μ„μΉμ λ…λ Ήμ„ μ²λ¦¬ν•λ‹¤.

## β… μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ‚¬μ©ν•λ” ν•¨μ

> μ‚¬μ©μ μ •μ ν•¨μ, λΌμ΄λΈλ¬λ¦¬ ν•¨μ, μ»¤λ„ ν•¨μ

#### β‘οΈ **μ‚¬μ©μ μ •μ ν•¨μ**

> ν”„λ΅κ·Έλλ¨Έκ°€ μ§μ ‘ μ‘μ„±ν• ν•¨μ

- μμ‹ μ ν”„λ΅κ·Έλ¨μ—μ„ μ •μν• ν•¨μ

#### β‘οΈ **λΌμ΄λΈλ¬λ¦¬ ν•¨μ**

> ν”„λ΅κ·Έλλ¨Έκ°€ μ§μ ‘ μ‘μ„±ν•μ§€λ” μ•μ•μ§€λ§, λ„κµ°κ°€ μ‘μ„±ν•΄ λ†“μ€ ν•¨μλ¥Ό νΈμ¶λ§ ν•΄μ„ μ‚¬μ©ν•λ” κ²ƒ

- μμ‹ μ ν”„λ΅κ·Έλ¨μ—μ„ μ •μν•μ§€λ” μ•μ•μ§€λ§, λ‚΄ ν”„λ΅κ·Έλ¨μ— μ •μλ ν•¨μ
- `μ‚¬μ©μ μ •μ ν•¨μ`μ™€ `λΌμ΄λΈλ¬λ¦¬ ν•¨μ`λ” λ¨λ‘ ν”„λ΅κ·Έλ¨μ μ½”λ“ μμ—­μ— κΈ°κ³„μ–΄ λ…λ Ή ν•νƒλ΅ μ΅΄μ¬ν•λ‹¤.
- ν”„λ΅κ·Έλ¨μ΄ μ‹¤ν–‰λ  λ•λ§λ‹¤ `ν”„λ΅μ„Έμ¤μ μ£Όμ† κ³µκ°„`μ— ν¬ν•¨λ¨
- ν•¨μ νΈμ¶ μ‹μ—λ„ μμ‹ μ `μ£Όμ† κ³µκ°„`μ— μλ” `μ¤νƒ` μ‚¬μ©

#### β‘οΈ **μ»¤λ„ ν•¨μ**

> μ΄μμ²΄μ μ μ»¤λ„ μ½”λ“μ— μ •μλ ν•¨μ <br>
> μ»¤λ„ ν•¨μλ¥Ό νΈμ¶ν•λ” κ²ƒμ΄ λ°”λ΅ `system call`

- CPUμ μ–΄κ¶μ„ μ΄μμ²΄μ μ—κ² λ„κ²¨μ•Ό ν•λ‹¤.
- μ»¤λ„ν•¨μλ” `μ΄μμ²΄μ  μ»¤λ„μ μ£Όμ† κ³µκ°„`μ— `μ½”λ“` μ •μ

- β”οΈ μ»¤λ„ν•¨μμ λ‘ μΆ…λ¥

  - μ‹μ¤ν… μ½ ν•¨μ
  - μΈν„°λ½νΈ μ²λ¦¬ ν•¨μ

- μλ¥Ό λ“¤μ–΄, `μ‚Όκ° ν•¨μ sin()`μ€ λΌμ΄λΈλ¬λ¦¬ ν•¨μ
- `printf()` κ·Έ μμ²΄λ΅λ” λΌμ΄λΈλ¬λ¦¬ ν•¨μμ§€λ§, κ¶κ·Ήμ μΌλ΅ νΉκ¶ λ…λ ΉμΈ μ…μ¶λ ¥μ„ μλ°ν•λ―€λ΅ `printf()` λ‚΄μ—μ„ μ»¤λ„ ν•¨μλ¥Ό νΈμ¶ν•λ” μ‹μ¤ν… μ½μ„ λ™λ°ν•λ‹¤.
- μΌλ°μ μΈ ν•¨μ νΈμ¶ π† μ‹μ¤ν… μ½
  - μΌλ°μ μΈ ν•¨μ νΈμ¶: μ‚¬μ©μ ν”„λ΅κ·Έλ¨ λ‚΄μ— μ΅΄μ¬ν•λ” μ½”λ“ μ‹¤ν–‰
  - **μ‹μ¤ν… μ½**: μ΄μμ²΄μ λΌλ” λ³„κ°μ ν”„λ΅κ·Έλ¨μ— CPUλ¥Ό λ„κ²¨μ„ μ‹¤ν–‰
    - CPUλ¥Ό μ΄μμ²΄μ μ—κ² λ„κΈ°κΈ° μ„ν•΄μ„ μΈν„°λ½νΈμ™€ ν†µμΌν• λ©”μ»¤λ‹μ¦, μ¦‰ CPUμ μΈν„°λ½νΈ λΌμΈμ„ μ„Έν…ν•λ” λ°©λ²•μ„ μ‚¬μ©ν•λ‹¤.

## β… Virtual Memory κµ¬μ„± μ”μ†

- μ»΄ν“¨ν„° ν”„λ΅κ·Έλ¨ λ‚΄λ¶€λ” **ν•¨μ**λ“¤λ΅ κµ¬μ„±λμ–΄ μλ‹¤.
- κ·Έλμ„ ν•λ‚μ ν•¨μκ°€ μ‹¤ν–‰λλ” μ™€μ¤‘μ— λ‹¤λ¥Έ ν•¨μλ¥Ό νΈμ¶ν•κ³ , νΈμ¶λ ν•¨μμ μν–‰μ΄ λλ‚λ©΄ λ‹¤μ‹ μ›λ μν–‰ν•λ ν•¨μλ΅ λμ•„κ°€ ν”„λ΅κ·Έλ¨μ„ κ³„μ† μ‹¤ν–‰ν•λ‹¤.
- ν•νΈ ν”„λ΅κ·Έλ¨μ΄ μ‹¤ν–‰λκΈ° μ„ν•΄μ„λ” `ν•΄λ‹Ή λ…λ Ήμ„ λ‹΄μ€ ν”„λ΅κ·Έλ¨μ μ£Όμ† μμ—­`μ΄ λ©”λ¨λ¦¬ μ„μ— μ¬λΌκ°€ μμ–΄μ•Ό ν•λ‹¤.

- `ν•΄λ‹Ή λ…λ Ήμ„ λ‹΄μ€ ν”„λ΅κ·Έλ¨μ μ£Όμ† μμ—­/κ³µκ°„`μ€ `μ½”λ“ code`, `λ°μ΄ν„° data`, `μ¤νƒstack`μΌλ΅ κµ¬λ¶„λλ‹¤.

## β… μ΄μμ²΄μ  kernelκµ¬μ΅°

- μ΄μμ²΄μ λ„ ν•λ‚μ ν”„λ΅κ·Έλ¨μ΄λ―€λ΅, μ΄μμ²΄μ  μ»¤λ„ μ—­μ‹ `μ£Όμ† κ³µκ°„(μ½”λ“, λ°μ΄ν„°, μ¤νƒ)`μ„ κ°€μ§„λ‹¤.
- μ΄μμ²΄μ μ λ©μ μ€ `1. μ•„λ«λ‹¨μ ν•λ“μ›¨μ–΄ μμ› ν¨μ¨μ  κ΄€λ¦¬`, `2. μ—λ‹¨μ μ‘μ©ν”„λ΅κ·Έλ¨ λ° μ‚¬μ©μμ—κ² νΈλ¦¬ν• μ„λΉ„μ¤ μ κ³µ`

- β”οΈ **kernel** `code`:
  - CPU, λ©”λ¨λ¦¬ λ“± μμ› κ΄€λ¦¬ λ¶€λ¶„ β• μ‚¬μ©μμ—κ² νΈν• μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•κΈ° μ„ν• λ¶€λ¶„
  - λ μ‹μ¤ν… μ½, μΈν„°λ½νΈ μ²λ¦¬ μ½”λ“
  - μμ› κ΄€λ¦¬ CPU scheduling, memory managementμ„ν• μ½”λ“

<br>

- β”οΈ **kernel** `data`:
  - κ° ν”„λ΅μ„Έμ¤μ μƒνƒ, CPU μ‚¬μ© μ •λ³΄, λ©”λ¨λ¦¬ μ‚¬μ©μ •λ³΄ λ“±μ„ μ μ§€ν•κΈ° μ„ν• μλ£κµ¬μ΅° `PCB`λ¥Ό λ‘κ³  μλ‹¤.
  - ν•λ“μ›¨μ–΄, μ†ν”„νΈμ›¨μ–΄λ¥Ό ν¬ν•¨ν•΄ μ‹μ¤ν… λ‚΄ λ¨λ“  μμ›μ„ κ΄€λ¦¬ν•κΈ° μ„ν• μλ£κµ¬μ΅°λ¥Ό κ°€μ§€κ³  μλ‹¤.
  - `PCB`: Process Table and Control Block
  - data structure used by OS to store information about specific process
  - each process has its own PCB, includes details for the OS to manage, control process
  - ν„μ¬ ν”„λ΅μ„Έμ¤κ°€ 10κ° μ‹¤ν–‰λκ³  μλ‹¤ β΅οΈ `PCB`λ„ 10κ°

<br>

- β”οΈ **kernel** `stack`:
  - ν•¨μ νΈμ¶ μ‹ λ³µκ·€μ£Όμ† μ €μ¥
  - ν„μ¬ μ‹¤ν–‰μ¤‘μΈ ν”„λ΅μ„Έμ¤λ§λ‹¤ **λ³„λ„μ** μ¤νƒμ„ λ‘μ–΄ κ΄€λ¦¬ν•λ‹¤.
  - μλ¥Ό λ“¤μ–΄ `ν”„λ΅κ·Έλ¨ A`κ°€ μ‹¤ν–‰λλ‹¤κ°€ μ΄μμ²΄μ λ¥Ό νΈμ¶ν•λ©΄ `stack A`μ— `ν”„λ΅κ·Έλ¨ A`μ €μ¥ν•΄λ†“λ” μ‹μ΄λ‹¤

<img width="529" alt="Screenshot 2025-01-04 at 13 01 57" src="https://github.com/user-attachments/assets/ef7c83c0-ccca-4c3c-bc90-3f2f5232ee2b" />

## β… ν”„λ΅μ„Έμ¤μ λ‘ κ°€μ§€ μ‹¤ν–‰ μƒνƒ

- ν”„λ΅μ„Έμ¤ Aκ°€ CPUμ—μ„ μ‹¤ν–‰λκ³  μμ
- 1οΈβƒ£ μΌλ°μ μΈ ν•¨μ νΈμ¶(μμ‹ μ μ£Όμ† κ³µκ°„μ— μ •μλ μ½”λ“ μ‹¤ν–‰) β΅οΈ **μ‚¬μ©μ λ¨λ“**
  - μ‚¬μ©μ μ •μν•¨μ, λΌμ΄λΈλ¬λ¦¬ ν•¨μ νΈμ¶
  - λ¨λ“μ λ³€κ²½ μ—†μ΄ `μ‚¬μ©μ λ¨λ“`μ—μ„ μ‹¤ν–‰ μ§€μ†, `modebit 1`
- 2οΈβƒ£ μ»¤λ„μ μ‹μ¤ν… μ½ ν•¨μ μ‹¤ν–‰ β΅οΈ **μ»¤λ„ λ¨λ“**
  - `μ»¤λ„λ¨λ“`λ΅ μ§„μ…ν•΄ μ»¤λ„μ μ£Όμ† κ³µκ°„μ— μ •μλ ν•¨μ μ‹¤ν–‰ `modebit 0`
- λ”°λΌμ„ ν”„λ΅μ„Έμ¤ μ‹¤ν–‰μ€ `μ‚¬μ©μ λ¨λ“`μ™€ `μ»¤λ„λ¨λ“`λ¥Ό μ™”λ‹¤κ°”λ‹¤ ν•λ©΄μ„ μ‹¤ν–‰

## β… μΈν„°λ½νΈ

> `Device controller`λ” `I/Oμ¥μΉ`λ΅λ¶€ν„° `local buffer`λ΅ λ°μ΄ν„°λ¥Ό μ½μ–΄λ“¤μΈλ‹¤. <br>
> μ΄ κ³Όμ •μ΄ λλ‚λ©΄ `Device controller`λ” CPUμ—κ² "λ‚ λλ‚¬μ–΄!" λ³΄κ³ ν•κ³ , μ΄κ²ƒμ΄ λ°”λ΅ **μΈν„°λ½νΈ** <br>

> μΈν„°λ½νΈ λ‹Ήν• μ‹μ μ λ μ§€μ¤ν„°μ™€ `program counter`λ¥Ό μ €μ¥ν•κ³ , CPUμ μ–΄λ¥Ό μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄μ— λ„κΈ΄λ‹¤.

- CPU μ†μ—λ” μΈν„°λ½νΈλ¥Ό ν™•μΈν•  μ μλ” `μΈν„°λ½νΈ λΌμΈ`μ΄ μλ‹¤.
- μΈν„°λ½νΈκ°€ λ°μƒλλ©΄, `μΈν„°λ½νΈ λΌμΈ`μ΄ μ„Έν…λλ‹¤.
- CPUλ” `Program Counter PC`κ°€ κ°€λ¦¬ν‚¤κ³  μλ” μ§€μ μ λ…λ Ήμ„ ν•λ‚μ”© μν–‰ν•κ³  λ‚μ„, λ‹¤μ λ…λ Ήμ„ μν–‰ν•κΈ° μ§μ „μ— `μΈν„°λ½νΈ λΌμΈ`μ΄ μ„Έν…λμ—λ”μ§€ ν™•μΈν•λ‹¤.
- λ§μ•½ μΈν„°λ½νΈκ°€ λ°μƒν–μΌλ©΄(`timer`, `I/Oμ¥μΉ`), CPUλ” ν„μ¬ μν–‰ν•λ ν”„λ΅μ„Έμ¤λ¥Ό λ©μ¶”κ³ 
- μ΄μμ²΄μ  μ»¤λ„μ μΈν„°λ½νΈ λ²΅ν„°μ—μ„ ν•΄λ‹Ή μΈν„°λ½νΈμ— λ€ν• μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄μ„ μ°Ύλλ‹¤.
- μ΄μμ²΄μ μ μΈν„°λ½νΈ μ²λ¦¬λ£¨ν‹΄μΌλ΅ μ΄λ™, μΈν„°λ½νΈ μ²λ¦¬λ¥Ό μν–‰ν•λ‹¤.
- μΈν„°λ½νΈ μ²λ¦¬λ¥Ό λ§μΉκ³  λ‚λ©΄ μΈν„°λ½νΈ λ°μƒ μ§μ „ ν”„λ΅μ„Έμ¤μ—κ² CPUμ μ μ–΄κ¶μ΄ λ‹¤μ‹ λ„μ–΄κ°„λ‹¤.

#### β‘οΈ μΈν„°λ½νΈμ μΆ…λ¥

- β”οΈ **ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ(μ™Έλ¶€ μΈν„°λ½νΈ)**:

  - ν•λ“μ›¨μ–΄ λ””λ°”μ΄μ¤ μ»¨νΈλ΅¤λ¬μ—μ„ μ‘μ—…μ΄ λλ‚¬μ„ λ•(μ…μ¶λ ¥) μΈν„°λ½νΈ
  - `ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ`λ” `ν•λ“μ›¨μ–΄ device controller`μ΄ `μΈν„°λ½νΈ λΌμΈ`μ„ μ„Έν…ν•λ‹¤.
  - `timer`, ν•λ“μ›¨μ–΄μ— μν•΄ λ°μƒ

  - μ™Έλ¶€ μ‹ νΈ μΈν„°λ½νΈ: νƒ€μ΄λ¨Έ μΈν„°λ½νΈ, ν‚¤λ³΄λ“λ΅ μΈν„°λ½νΈ ν‚¤λ¥Ό λλ €μ„ λ•, μ™Έλ¶€ μ¥μΉλ΅λ¶€ν„° μΈν„°λ½νΈ μ”μ²­μ΄ μλ” κ²½μ°
  - μ…μ¶λ ¥ μΈν„°λ½νΈ(I/O interrupt): μ…μ¶λ ¥μ¥μΉκ°€ λ°μ΄ν„° μ „μ†΅ μ”κµ¬, λλ” λλ‚¬μ„ λ•, λλ” μ¤λ¥ λ°μƒ μ‹
  - μ „μ› μ΄μƒ μΈν„°λ½νΈ(power fail interrupt): μ •μ „, νμ› μ΄μƒ λ“±
  - κΈ°κ³„ μ°©μ¤ μΈν„°λ½νΈ(machine check interrupt): CPUκΈ°λ¥ μ¤λ¥

<br>
<br>

- β”οΈ **μ†ν”„νΈμ›¨μ–΄(λ‚΄λ¶€) μΈν„°λ½νΈ** `Trap`:

  - ν”„λ΅κ·Έλ¨μ—μ„ μμ‹ μ κ¶ν• λ°–μ μ‘μ—…μ„ μν–‰ν•  λ• μ΄μμ²΄μ μ—κ² μ‹μ¤ν… μ½λ΅ μΈν„°λ½νΈ
  - `μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ`λ” μ†ν”„νΈμ›¨μ–΄κ°€ μ§μ ‘ `μΈν„°λ½νΈ λΌμΈ`μ„ μ„Έν…ν•λ‹¤.

  - exception: ν”„λ΅κ·Έλ¨μ΄ μ¤λ¥λ¥Ό λ²”ν• κ²½μ°
    - `division by zero`, `overflow/underflow` λ“± exception
  - system call: ν”„λ΅κ·Έλ¨μ΄ μ»¤λ„ ν•¨μλ¥Ό νΈμ¶ν•λ” κ²½μ°
    - ν”„λ΅κ·Έλ¨ Aκ°€ κ¶ν• λ°– μΌμ„ ν•λ ¤κ³  ν•  λ•, `modebit`μ„ `0`μΌλ΅ μ„¤μ • ν›„ `system call`

---

- β“ I/Oλ¥Ό ν•λ ¤λ©΄ μ–΄λ–¤ μΈν„°λ½νΈ μΆ…λ¥κ°€ ν•„μ”ν•κ°€?
- ν•λ“μ›¨μ–΄, μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ λ¨λ‘ ν•„μ”ν•λ‹¤.
- ν”„λ΅κ·Έλ¨μ΄ OSμ—κ² `system call`λ΅ μΈν„°λ½νΈ μ”μ²­μ„ ν•λ‹¤. β΅οΈ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ
- I/Oμ¥μΉκ°€ I/Oμ‘μ—…μ΄ λλ‚λ©΄ CPUμ—κ² μΈν„°λ½νΈλ¥Ό ν•λ‹¤. β΅οΈ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ

---

- β“ μΈν„°λ½νΈ μ²λ¦¬ μ¤‘μ— λ λ‹¤λ¥Έ μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ μ–΄λ–»κ² λ κΉ?
- μ›μΉ™μ μΌλ΅ μΈν„°λ½νΈ μ²λ¦¬ μ¤‘μ—λ” λ‹¤λ¥Έ μΈν„°λ½νΈκ°€ λ°μƒν•λ”κ±Έ ν—μ©ν•μ§€ μ•λ”λ‹¤.
- μ΄λ” **λ°μ΄ν„° μΌκ΄€μ„± μ μ§€**λ¥Ό μ„ν•¨μ΄λ‹¤.
  - μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ©΄μ„ μ»¤λ„μ— μ •μλ λ°μ΄ν„°λ¥Ό λ³€κ²½ν•κ³  μλ”λ°, λ‹¤λ¥Έ μΈν„°λ½νΈκ°€ λ°μƒν•΄ μ•μ„  μΈν„°λ½νΈμ—μ„ λ³€κ²½μ¤‘μΈ λ°μ΄ν„°λ¥Ό λ λ³€κ²½ν•λ©΄ μλ„ν•μ§€ μ•μ€ λ°μ΄ν„° κ°’μ΄ λ‚μ¬ μ μμ!
- ν•μ§€λ§ μμ™€κ°€ μ΅΄μ¬ν•λ‹¤. **λ” λ†’μ€ μ¤‘μ”λ„λ¥Ό κ°€μ§„ μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄**, λ” λ‚®μ€ μ¤‘μ”λ„λ¥Ό κ°€μ§„ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” μ™€μ¤‘μ— μΈν„°λ½νΈ λ°μƒμ„ ν—μ©ν•  μ μλ‹¤.

#### β‘οΈ μΈν„°λ½νΈ λ²΅ν„°

> μΈν„°λ½νΈμ™€ μΈν„°λ½νΈ μ²λ¦¬μ— λ€ν• μ²λ¦¬λ£¨ν‹΄ μ •λ³΄λ¥Ό κ°€μ§€κ³  μλ” μΌμΆ…μ ν…μ΄λΈ”

- μΈν„°λ½νΈκ°€ λ°μƒν•λ” κ²½μ°λ” μ—¬λ¬ κ°€μ§€κ°€ μκ³ (ν•λ“μ›¨μ–΄/μ†ν”„νΈμ›¨μ–΄/νƒ€μ΄λ¨Έ λ“±)
- κ° κ²½μ°λ§λ‹¤ μ‹¤ν–‰ν•΄μ•Ό ν•λ” μ‘μ—…μ΄ λ‹¤λ¥΄λ‹¤.
- **ν•΄λ‹Ή μΈν„°λ½νΈμ μ²λ¦¬ λ£¨ν‹΄ μ£Όμ†**λ¥Ό **μΈν„°λ½νΈ λ²΅ν„°**λΌκ³  λ¶€λ¥Έλ‹¤.
- μΌμΆ…μ ν¬μΈν„°
- μμ‹: ~μ΄ κ²½μ°μ—λ” ~μ— μλ” μ£Όμ†λ΅ κ°€μ„ λ…λ Ήμ–΄λ¥Ό μ‚΄ν΄λ΄λΌ

#### β‘οΈ μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄(Interrupt Service Routine)

- μΈν„°λ½νΈκ°€ λ°μƒν–μ„ λ–„ CPUκ°€ μν–‰ν•΄μ•Ό ν•λ” λ…λ Ήμ–΄κ°€ λ°”λ΅ `μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄`
- κ·Έ μ£Όμ†λ΅ κ°€μ„ μ •λ§ μ‹¤ν–‰ν•΄μ•Ό ν•λ” **λ…λ Ήμ–΄**
- ν•΄λ‹Ή μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•λ” μ»¤λ„ ν•¨μ
- μμ‹: ~μ΄ κ²½μ°μ—λ” ~λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•΄λΌ

- `μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄`μ€ λ΅μ»¬λ²„νΌμ— μλ” λ°μ΄ν„°λ¥Ό λ©”λ¨λ¦¬λ΅ μ®κΈ°κ³ , CPUμ—μ„ μ‹¤ν–‰ν•  μ μλ„λ΅ μ¤€λΉ„μ‹ν‚¨λ‹¤.
- `μΈν„°λ½νΈ μ²λ¦¬ λ£¨ν‹΄`μ€ μ΄μμ²΄μ  μ»¤λ„μ— ν¬ν•¨λμ–΄ μλ‹¤.

#### β‘οΈ μΈν„°λ½νΈ ν•Έλ“¤λ§

- μΈν„°λ½νΈκ°€ λ°μƒν–μ„ λ• λ€μ‘ μ μ°¨
- CPUλ” λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•  λ• CPUμ λ‚΄λ¶€ μ„μ‹ κΈ°μ–µ μ¥μΉμΈ `register`μ— μ €μ¥ν•κ±°λ‚ μ½μΌλ©΄μ„ ν•λ‹¤.
- CPUκ°€ λ…λ Ή μ‹¤ν–‰ λ„μ¤‘ `interrupt`κ°€ λ°μƒν•λ©΄, μƒλ΅μ΄ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•΄μ•Ό ν•λ―€λ΅ `register`μ— μ €μ¥λ κΈ°μ΅΄ λ°μ΄ν„°λ¥Ό λ°±μ—…ν•΄ λ‘”λ‹¤.
- μ΄ λ• `PCB`λΌλ” κ³³μ— λ°±μ—…(`register`, μ‹¤ν–‰ μ¤‘μ΄λ λ©”λ¨λ¦¬ μ£Όμ†, ν•λ“μ›¨μ–΄ λ“± μ €μ¥)

<img width="474" alt="Screenshot 2025-01-02 at 13 49 57" src="https://github.com/user-attachments/assets/3aadcf8f-1aac-4bd7-a9cc-3feae20712af" />

## β… μ‹μ¤ν… μ½

> μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ΄μμ²΄μ μ μ„λΉ„μ¤λ¥Ό λ°›κΈ° μ„ν•΄ μ»¤λ„ ν•¨μλ¥Ό νΈμ¶ν•λ” κ²ƒ<br>
> μμ‹ μ μ£Όμ† κ³µκ°„μ„ κ±°μ¤λ¥΄λ” μμ—­μ— μ΅΄μ¬ν•λ” ν•¨μλ¥Ό νΈμ¶ν•λ” κ²ƒ

- λ‚΄ κ¶ν•μΌλ΅λ” μ‹¤ν–‰ν•  μ μ—†λ” λ…λ Ήμ„(`I/Oμ…μ¶λ ¥`)
- μ΄μμ²΄μ μ—κ² ν•΄λ‹¬λΌκ³  μ”μ²­
- μλ¥Ό λ“¤μ–΄, μ‚¬μ©μ ν”„λ΅κ·Έλ¨ Aκ°€ μ‹¤ν–‰λλ‹¤κ°€, λ””μ¤ν¬μ—μ„ μ…μ¶λ ¥μ΄ ν•„μ”ν•¨
- β΅οΈ ν”„λ΅κ·Έλ¨ Aλ” μ…μ¶λ ¥ κ¶ν•μ΄ μ—†μ(μ…μ¶λ ¥μ€ μ΄μμ²΄μ λ§ κ°€λ¥)
- β΅οΈ μ΄μμ²΄μ μ—κ² λ””μ¤ν¬ μ»¨νΈλ΅¤λ¬μ— μ…μ¶λ ¥ ν•΄λ‹¬λΌκ³  λ¶€νƒ
- β΅οΈ λ”°λΌμ„ ν”„λ΅κ·Έλ¨ Aκ°€ κ°€μ§€κ³  μλ CPUλ¥Ό μ΄μμ²΄μ μ—κ² λ„κΈ΄λ‹¤.
- β΅οΈ ν”„λ΅κ·Έλ¨ Aκ°€ μ‹μ¤ν… μ½μ„ ν•΄μ„ μΈν„°λ½νΈλ¥Ό κ±΄λ‹¤.

- μμ‹ μ ν”„λ΅κ·Έλ¨μ—μ„ ν•¨μ νΈμ¶ β
- μ»¤λ„μ΄λΌλ” λ‹¤λ¥Έ ν”„λ΅κ·Έλ¨μ μ£Όμ† κ³µκ°„μ— μ΅΄μ¬ν•λ” ν•¨μ νΈμ¶ β­•οΈ
- μΌλ°μ μΈ ν•¨μ νΈμ¶: μμ‹ μ μ¤νƒμ— λ³µκ·€ μ£Όμ† μ €μ¥ ν›„, νΈμ¶λ ν•¨μ μ„μΉλ΅ μ ν”„
- π† μ‹μ¤ν… μ½: μ£Όμ† κ³µκ°„ μμ²΄κ°€ λ‹¤λ¥Έ κ³³μΌλ΅ μ΄λ™
- λ”°λΌμ„ ν”„λ΅κ·Έλ¨ μμ‹ μ΄ μΈν„°λ½νΈ λΌμΈμ— μΈν„°λ½νΈ μ„Έν…ν•λ” λ…λ Ήμ„ ν†µν•΄ μ΄λ£¨μ–΄μ§„λ‹¤.

## β… μΈν„°λ½νΈ, μ‹μ¤ν… μ½ μ§λ¬Έ

1. μ΄μμ²΄μ ν•ν… CPUκ°€ λ„μ–΄κ°€λ” κ²½μ°λ” μ–΄λ–¤ κ²½μ°κ°€ μλ‚μ”?

- λ¨λ‘ μΈν„°λ½νΈ λΌμΈμ„ μ„Έν…ν•λ” κ²½μ°
- ν•λ“μ›¨μ–΄μ—μ„ μΈν„°λ½νΈ: I/OκΈ°κΈ°μ—μ„ μ‘μ—…μ„ μ™„λ£ν•΄ CPUμ—κ² μ™„λ£ν–λ‹¤κ³  μ•λ¦΄ λ–„ μΈν„°λ½νΈ
- μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μΈν„°λ½νΈ: CPUμ—μ„ κ¶ν• λ°–μ ν•¨μλ¥Ό νΈμ¶ν•  λ•(μλ¥Ό λ“¤μ–΄ I/O) μ΄μμ²΄μ  μ»¤λ„¬ λ¨λ“ μ‚¬μ© μ„ν•΄ μ‹μ¤ν… μ½, λλ” exceptionμ΄ λ°μƒν–μ„ λ•
- timerμ—μ„ μΈν„°λ½νΈ ν•  μλ„ μμ.

2. μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ CPUλ¥Ό λΉΌμ•—κΈ°λ” κ²½μ°

- μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ€ κ³„μ† μ“°κ³  μ‹¶μ§€λ§, CPU λ…μ κ¶μ„ λ§‰μΌλ ¤κ³  timerμ—μ„ νƒ€μ„μ•„μ›ƒ
- μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ I/Oκ°€ ν•„μ”ν•΄ κΈ°λ‹¤λ ¤μ•Ό ν•λ” κ²½μ°
