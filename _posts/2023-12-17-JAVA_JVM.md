---
title: Java Virtual Machine
categories: [JAVA, JAVA_Basics]
tags: [] # TAG names should always be lowercase
---

## âœ… JVM

> 1. JAVA to be run regardless of OS <br>
> 2. Manage and optimize memory <br>

### â­ï¸ complile time

JVMì•ˆì—ì„œ buildí•˜ëŠ” ì‹œê°„ <br>
build ğŸŸ° complie <br>
ìë°”ëŠ” ì»´íŒŒì¼ ì–¸ì–´ <br>
ìë°”ì—ì„œëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ ì§œë©´ **ì»´íŒŒì¼**ì„ í†µí•´ í´ë˜ìŠ¤ íŒŒì¼ì˜ ë°”ì´íŠ¸ ì½”ë“œë¡œ ë§Œë“ ë‹¤. <br>
**ì»´íŒŒì¼ëŸ¬:** ì»´íŒŒì¼ í•˜ëŠ” ë„êµ¬ <br>

#### ğŸ’¥ error

ì—ëŸ¬ ìƒê¸°ë©´ ì•„ì˜ˆ complileìì²´ê°€ ì•ˆ ë¨(IntelliJê°€ ì¡ì•„ì¤Œ) <br>
syntax erroe(ì˜¤íƒ€ë¥¼ ëƒˆìŒ) <br>
type check error(data type) `protected int male= "Male"` <br>
ì ‘ê·¼ì œì–´ì ì˜¤ë¥˜(privateí•´ë†“ê³  ìì‹ì´ ì‚¬ìš©í•¨) <br>

### â­ï¸ run time

JVMì—ì„œ buildí•œ í”„ë¡œê·¸ë¨ì´ ëŒì•„ê°€ëŠ” ì‹œê°„ <br>

#### ğŸ’¥ error

complile, buildëŠ” ë˜ëŠ”ë° ì‹¤í–‰ì´ ì•ˆ ë¨ <br>
0ë‚˜ëˆ„ê¸° ì˜¤ë¥˜ <br>
NULL ì°¸ì¡° ì˜¤ë¥˜ <br>
ë©”ëª¨ë¦¬ ë¶€ì¡± ì˜¤ë¥˜ <br>

---

## âœ… Compile

<img width="717" alt="Screenshot 2024-07-31 at 22 43 15" src="https://github.com/user-attachments/assets/96588023-a67a-4549-8ac3-7998d936917c">

0. JVMì„ ì‹¤í–‰í•˜ë©´ RAMì˜ heapìœ„ì— ì˜¬ë¼ê°€ê²Œ ëœë‹¤.<br>
   JVMì„ ì‹¤í–‰í•˜ë©´ RAMì—ì„œ íŠ¹ì • ë©”ëª¨ë¦¬ ì˜ì—­ì„ í• ë‹¹ë°›ì•„ ì‹¤í–‰ë˜ê²Œ ë˜ëŠ”êµ¬ë‚˜. <br>
   run time data area ìœ„ì— í™ì´ ìˆëŠ” ê²ƒ <br>

1. Programmer codes java `source code(.java)` <br>
2. Compiler `JavaC` compiles `source code(.java)` into `java byte code(.class)` <br>
   the code is consisted of Opcode <br>
3. Transmit compiled `bite code` to **class loader** <br>
4. Class loader uses **Dynamic Loading** to load and link needed classes <br>
   and puts it on **run time data area**, which is **JVM memory** <br>
5. class files are interpreted by **Execution Engine** <br>
6. thread synchronization, garbage collection is run <br>

### memory

```
   -Xmx1M //1ë©”ê°€ë°”ì´íŠ¸ë§Œí¼ heapí• ë‹¹
   -Xmx10M //10ë©”ê°€ë°”ì´íŠ¸ë§Œí¼ heapí• ë‹¹
```

---

## ğŸ’¡ Class Loader: í˜¸ì¶œ

Java codeê°€ ì»´íŒŒì¼ëœ `.class` íŒŒì¼ì„ JVMìœ¼ë¡œ ì²˜ìŒ ë¡œë“œí•˜ì—¬, ì»´í“¨í„°ê°€ JVMì˜ ì‹¤í–‰í•˜ê¸° ì§ì „ ì¤€ë¹„ <br>
class loaderê°€ ë§Œë“¤ì–´ì§„ í´ë˜ìŠ¤ íŒŒì¼ì„ ë¶€ë¥¸ë‹¤. <br>
class loader ì‹¤í–‰ í›„ **Runtime Data Area**ì— ì €ì¥ <br>
â­ï¸ CLASS LOADERë‹¨ê³„ì—ì„œ `static ë³€ìˆ˜`ì™€ `í•¨ìˆ˜`ê°€ ì‹¤í–‰ëœë‹¤ <br>

#### âœ”ï¸ loading

í´ë˜ìŠ¤ íŒŒì¼ì„ ê°€ì ¸ì™€ì„œ JVMì˜ **ë©”ëª¨ë¦¬ì— ë¡œë“œ** <br>
Method Areaì— ì €ì¥í•˜ëŠ” ë‹¨ê³„ì¸ë°, <br>
ì´ ì¤‘ **Static ë³€ìˆ˜ì™€ ì´ˆê¸°ê°’**ì„ **Method Area**ì— ì €ì¥í•œë‹¤. <br>

#### âœ”ï¸ linking

í´ë˜ìŠ¤ íŒŒì¼ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ **ê²€ì¦/ì¤€ë¹„/ë¶„ì„** <br>

- verifying: ìë°” ì–¸ì–´ ëª…ì„¸(Java Language Specification) ë° JVM ëª…ì„¸ì— ëª…ì‹œëœ ëŒ€ë¡œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ ê²€ì‚¬í•©ë‹ˆë‹¤.<br>
- preparing: í´ë˜ìŠ¤ê°€ í•„ìš”ë¡œ í•˜ëŠ” ë©”ëª¨ë¦¬ í• ë‹¹ <br>
- resolving ë¶„ì„, í´ë˜ìŠ¤ì˜ ìƒìˆ˜ í’€ ë‚´ ëª¨ë“  ì‹¬ë³¼ë¦­ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ë‹¤ì´ë ‰íŠ¸ ë ˆí¼ëŸ°ìŠ¤ë¡œ ë³€ê²½ <br>

#### âœ”ï¸ initialization

static ë³€ìˆ˜ì™€ static blockì˜ ì‹¤í–‰ì„ ìˆ˜í–‰<br>
í´ë˜ìŠ¤ ë³€ìˆ˜ë“¤ì„ ì ì ˆí•œ ê°’ìœ¼ë¡œ ì´ˆê¸°í™” <br>
ì˜ˆë¥¼ ë“¤ì–´ `int`ëŠ” 0ìœ¼ë¡œ, `string`ê°’ì€ nullë¡œ ì´ˆê¸°í™” <br>
`-Xlog:class+init` <br>
<br>
â—ï¸ ì´ˆê¸°í™” ë‹¨ê³„ëŠ” ì½”ë“œì—ì„œ í´ë˜ìŠ¤ê°€ ì²˜ìŒ ì‚¬ìš©ë  ë•Œ ì‹¤í–‰ <br>

## ğŸ’¡ Execution Engine: ìˆ˜í–‰

ì‹¤ì œ ë°”ì´íŠ¸ ì½”ë“œë¥¼ ìˆ˜í–‰<br>
`-XX:+PrintCompliation`

#### ğŸ”¡ JAVA interpreter

ìë°” ì½”ë“œë¥¼ ì½ì–´ì„œ í”„ë¡œê·¸ë¨ ì‹¤í–‰<br> <br>
**ì¸í„°í”„ë¦¬í„°**: ë™ì‹œ í†µì—­ (0, 1ì„ ì»´í“¨í„° ì–¸ì–´ë¡œ í•´ì„)<br> <br>

#### ğŸ“ Just In Time(JIT) compiler

ë°˜ë³µë¬¸ì¥ ë©”ëª¨ <br>
**Native code:** ë°˜ë³µë˜ëŠ” ì½”ë“œ((native)(static) ì´ë¼ê³  ë’¤ì— ë¶™ì–´ìˆìŒ) <br>
ë§¤ë²ˆ í†µì—­ì„ í•˜ë‹¤ë³´ë©´, ë°˜ë³µë˜ëŠ” ì½”ë“œë“¤ì´ ìˆìŒ. ("ì•ˆë…•í•˜ì„¸ìš”" ì²˜ëŸ¼ ê³„ì† ë‚˜ì˜¤ëŠ” ì½”ë“œ) <br>
ë˜‘ê°™ì€ ì½”ë“œë“¤ì„ ë©”ëª¨ì— ì €ì¥ì„ í•´ ë‘ì—ˆë‹¤ê°€ ì¸í„°í”„ë¦¬í„°ë¡œ ë˜ í†µì—­í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ë³µë¶™í•´ì„œ ì”€ <br>
ğŸ‘ğŸ» faster than interpreter

#### ğŸ—‘ï¸ Garbage Collector

ì“°ë ˆê¸° ìˆ˜ì§‘ from heap<br>
í•„ìš”ì—†ëŠ” ë°ì´í„°ë“¤ì„ ìˆ˜ì§‘í•´ì„œ ë²„ë¦¬ëŠ” ì—­í• <br>

- object is null
- objects created in block, and when the block is finished
- parent object is null, the child

unreachableí•œ ê°í˜ë“¤ì„ ì£¼ê¸°ì ìœ¼ë¡œ ì—†ì• ì„œ heapì‚¬ìš©ì„ ìµœì í™” <br>
ì°¸ì¡°ë˜ì§€ ì•Šì€ ê°ì²´ë“¤ì„ íƒìƒ‰ í›„ ì‚­ì œ â†’ ì‚­ì œëœ ê°ì²´ì˜ ë©”ëª¨ë¦¬ ë°˜í™˜ â†’ í™ ë©”ëª¨ë¦¬ ì¬ì‚¬ìš© <br>

- stop the world

## ğŸ’¡ JVM Runtime Data Area: ì €ì¥

JVMì´ OSìœ„ì—ì„œ ì‹¤í–‰ë  ë•Œ í• ë‹¹ë°›ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ <br>
ì‹¤ì œ ë™ì‘í•  ë•Œ ë°ì´í„°ë“¤ì´ ì €ì¥ë˜ëŠ” ê³³ <br>

- Method area
- HEAP
- JVM Stack
- PC Register
- Native method stack

#### âœ”ï¸ Method Area (Runtime Constant Pool)

**when class is loaded** <br>

> created when JVM starts <br>
> saves runtime static pool, field, method code, static, final static <br>
> ë©”ì„œë“œ ì˜ì—­ì— **í´ë˜ìŠ¤/ë©”ì†Œë“œ ì½”ë“œ, ì •ì  í•„ë“œ, ìƒìˆ˜ í’€** ì €ì¥ <br>

- class loaderê°€ ì‹¤í–‰ë˜ì–´ í˜¸ì¶œí•˜ë©´ ë°”ë¡œ ì—¬ê¸°ì— ì €ì¥ë˜ëŠ” ê²ƒ! <br>
- ë‚˜ì¤‘ì— ì‹¤í–‰ ì—”ì§„ì´ ì—¬ê¸°ì— ìˆëŠ” ì½”ë“œë¥¼ ì½ì–´ì„œ ì‹¤í–‰ì„ í•˜ëŠ” ê²ƒ <br>
  ë‹¤ìŒê³¼ ê°™ì€ ë©”íƒ€ ì •ë³´ë“¤ì„ ì €ì¥<br>

  - ë©”ì†Œë“œ: ë§¤ê°œë³€ìˆ˜/ì ‘ê·¼ì œì–´ì/ì´ë¦„<br>
  - í´ë˜ìŠ¤: ì†ì„±/ ë©”ì†Œë“œ/ ìƒì† ì •ë³´ ë“±<br>

- class variable í´ë˜ìŠ¤ ë³€ìˆ˜ ğŸŸ° ì •ì  í•„ë“œ(static)ì€ ì—¬ê¸°ì— ì €ì¥<br>
- ìƒìˆ˜(final static)<br>
- íŠ¹íˆ, ìƒìˆ˜(static)ëŠ” runtime ë•Œ ë§Œë“¤ì–´ì§€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼âŒ ì»´íŒŒì¼ ë•Œ ë§Œë“¤ì–´ì§„ë‹¤. â­•ï¸<br>
- ë¬¸ìì—´ Literal ì—¬ê¸°ì— ì €ì¥<br>

#### âœ”ï¸ HEAP

**when run** <br>

> ëŸ°íƒ€ì„ ì‹œ, ë™ì ìœ¼ë¡œ í• ë‹¹ë˜ëŠ” ì˜ì—­ìœ¼ë¡œ **ì¸ìŠ¤í„´ìŠ¤ì™€ ë°°ì—´ íƒ€ì… ë“±ì˜ ì£¼ì†Œ ì €ì¥**<br>

- ì¸ìŠ¤í„´ìŠ¤ ì—¬ê¸°ì— ì €ì¥<br>
- ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜(instance variable) `new` ì €ì¥
- ê°ì²´, ë°°ì—´ ì €ì¥
- í™ì— í• ë‹¹ëœ ë°ì´í„°ëŠ” **ê°€ë¹„ì§€ ì»¬ë ‰í„°**ì˜ ëŒ€ìƒì´ ëœë‹¤.
  <br>

â—ï¸ String typeì€ primitive typeì¸ì§€ reference typeì¸ì§€ ì£¼ì˜

```java
//primitive type= literal
//constant pool ì— ì €ì¥
String s1= "cat";
//reference type
//heapì— ì €ì¥
String s2= new String("cat");
```

#### âœ”ï¸ JVM stack(call stack, execution stack)

**when compiled** <br>

> í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì¤‘, **ì„ì‹œë¡œ í• ë‹¹ë˜ê³  ì†Œë©¸ë˜ëŠ” ì •ë³´** ì €ì¥<br>
> local variable, paramether <br>

<br>

ë©”ì„œë“œì˜ ì‘ì—…ì— í•„ìš”í•œ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì œê³µ

- ì˜ˆë¥¼ ë“¤ì–´ ë©”ì†Œë“œê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì‚¬ìš©ë˜ëŠ” ì§€ì—­ ë³€ìˆ˜(local variable)

#### âœ”ï¸ PC Register

**when new thread is created** <br>

> how thread should be run <br>
> JVM command address <br>

#### âœ”ï¸ Native method stack

> run the byte code <br>
> code that is not Java <br>

##### â˜‘ï¸ **í”„ë ˆì„**

ì–´ë–¤ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ë©´, ê·¸ ë©”ì†Œë“œë§Œì„ ìœ„í•œ ê³µê°„, ì¦‰ í”„ë ˆì„ì´ ë§Œë“¤ì–´ì§€ê²Œ ëœë‹¤.<br>
ì¦‰, ë©”ì†Œë“œê°€ ìˆ˜í–‰ë˜ëŠ”ë° í•„ìš”í•œ ë§Œí¼ì˜ ë©”ëª¨ë¦¬ë¥¼ ìŠ¤íƒì— í• ë‹¹ë°›ëŠ” ê²ƒì´ë‹¤.<br>
<br>
ì²« ë²ˆì¨°ë¡œ í˜¸ì¶œëœ ë©”ì„œë“œë¥¼ ìœ„í•œ ì‘ì—… ê³µê°„ì´ í˜¸ì¶œìŠ¤íƒì˜ ë§¨ ë°‘ì— ë§ˆë ¨ë˜ê³ <br>
ë‘ ë²ˆì§¸ë¡œ ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ë©´ ì²« ë²ˆì§¸ ë©”ì†Œë“œì˜ ë°”ë¡œ ìœ„ì— ë‘ ë²ˆì§¸ ë©”ì†Œë“œë¥¼ ìœ„í•œ ê³µê°„ì´ ë§ˆë ¨ëœë‹¤.<br>
ì´ ë•Œ ì²« ë²ˆì§¸ ë©”ì†Œë“œëŠ” ìˆ˜í–‰ì„ ë©ˆì¶”ê³ , ë‘ ë²ˆì§¸ ë©”ì†Œë“œê°€ ìˆ˜í–‰ëœë‹¤.<br>
ë”°ë¼ì„œ í˜¸ì¶œìŠ¤íƒì˜ ì œì¼ ìœ„ì— ìœ„ì¹˜í•˜ëŠ” ë©”ì†Œë“œê°€ í˜„ì¬ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë©”ì†Œë“œì´ë‹¤.<br>
ê·¸ë¦¬ê³  ê·¸ ì•„ë˜ì— ìˆëŠ” ë©”ì†Œë“œê°€ ë°”ë¡œ ìœ„ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œ ë©”ì„œë“œì´ë‹¤. <br>
ë‚˜ë¨¸ì§€ëŠ” ëŒ€ê¸°ìƒíƒœë¡œ ê¸°ë‹¤ë¦°ë‹¤. <br>
<br>
ë©”ì†Œë“œê°€ ì¢…ë£Œë˜ë©´ í”„ë ˆì„ë„ ì‚­ì œëœë‹¤.<br>
í”„ë ˆì„ì´ ì‚­ì œë˜ë©° ì‚¬ìš©í–ˆë˜ ë©”ëª¨ë¦¬ë¥¼ ë°˜í™˜í•˜ê³  ìŠ¤íƒì—ì„œ ì œê±°ëœë‹¤.
ì´ëŸ° í”„ë ˆì„ì„ ê´€ë¦¬í•˜ëŠ” ê³³ì´ ë°”ë¡œ JVM stack<br>
í”„ë ˆì„ì´ ì—¬ëŸ¬ê°œ ìŒ“ì—¬ ìˆì–´ì„œ ì´ë¦„ì´ stack<br>
ë§¤ê°œ ë³€ìˆ˜, ì§€ì—­ ë³€ìˆ˜ ë“±ì´ ì„ì‹œ ì €ì¥<br>

## âœ… JAVA í´ë˜ìŠ¤ ëŸ°íƒ€ì„ ë•Œ ì¼ì–´ë‚˜ëŠ” ì¼

```java
public class JvmRun {
    public static void main(String[] args) {
        //primitive type â¡ï¸ stack
        int myInt= 5;
        //final â¡ï¸constant pool
        final long My_LONG= 5L;
        //reference type â¡ï¸constant pool
        // heap & stack
        Customer customer1= new Customer("Kim");
        //reference type â¡ï¸ heap & stack
        int[] intArr= new int[5];
        //ë¬¸ìì—´ Literal â¡ï¸ constant pool
        String str1= "Hello World";
        //reference type â¡ï¸ heap
        String str2= new String("Hello World");
        customer1= null;
        //method â¡ï¸ methodì˜ì—­, í”„ë ˆì„
        myMethod(myInt);
    }
    static void myMethod(int param){
        int myInt2= param;
        //instance â¡ï¸constant pool
        Customer customer2= new Customer("Lee");
    }
}
```

#### 1ï¸âƒ£ ê°€ì¥ ë¨¼ì € Constant Poolì— compileí•˜ìë§ˆì ë„£ì–´ ë‘”ë‹¤. <br>

`final long My_LONG= 5L;` <br>
`Customer customer1= new Customer("Kim");` <br>
`String str1= "Hello World";` <br>
`Customer customer2= new Customer("Lee");` <br>

#### 2ï¸âƒ£ stackì— ì¶”ê°€ ì‹œì‘ <br>

`int myInt= 5;`<br>
`final long My_LONG= 5L;` ì´ë¯¸ Constant Poolì•  ì•˜ìœ¼ë¯€ë¡œ Constant Poolì—ì„œ ê°€ì ¸ì˜¨ë‹¤

#### 3ï¸âƒ£ `new`<br>

`Customer customer1= new Customer("Kim");`<br>
customerëŠ” reference type<br>
heapì— ë§Œë“¤ì–´ì§€ê³ <br>
stackì— ë³€ìˆ˜ê°€ heapì„ ê°€ë¦¬í‚¤ê³  ìˆë‹¤.

#### 4ï¸âƒ£ array<br>

`int[] intArr= new int[5];`<br>
ë§ˆì°¬ê°€ì§€ê³  intArrì„ ìœ„í•œ ë©”ëª¨ë¦¬ ì¥ì†Œê°€ heapì— ë§ˆë ¨ë˜ê³ <br>
stackì—ëŠ” ê·¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” ë³€ìˆ˜

#### 5ï¸âƒ£ ë¬¸ìì—´ literal<br>

`String str1= "Hello World";`<br><br>
stackì— ë³€ìˆ˜ ì¶”ê°€ë˜ê³ , constant poolì— ì´ë¯¸ ìˆëŠ” "Hello World"ì„ ê°€ë¦¬í‚¤ê³  ìˆë‹¤.

#### 6ï¸âƒ£ instance<br>

`String str2= new String("Hello World");`<br>
ìƒˆë¡­ê²Œ instanceê°€ heapì— ì¶”ê°€ë˜ì—ˆê³ <br>
ê·¸ ì£¼ì†ŒëŠ” ì•„ê¹Œ constant poolì— ì´ë¯¸ ìˆëŠ” "Hello World"ì„ ë°”ë¼ë³´ê³  ìˆë‹¤.<br>

#### 7ï¸âƒ£ ì•„ê¹Œ ì„ ì–¸ëœ ì¸ìŠ¤í„´ìŠ¤ ê°’ì„ ë°”ê¾¸ë©´?<br>

`customer1= null;`<br>
customerì€ Kim ê°€ë¦¬í‚¤ê³  ìˆì—ˆìŒ<br>
ì´ì¬ ë°”ê¿¨ìœ¼ë‹ˆ<br>
customerì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œê°€ null<br>

#### 8ï¸âƒ£ myMethod ë©”ì†Œë“œ<br>

ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•˜ê²Œ ë˜ë©´ **ë©”ì†Œë“œ í”„ë ˆì„**ì´ ìƒê¸´ë‹¤.<br>
â­ï¸ heapì—ëŠ” í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë“¤ì´ ì €ì¥ë˜ì–´ ìˆìŒ.<br>
â­ï¸ methodëŠ” ë©”ì†Œë“œ ì˜ì—­ì— ë©”íƒ€ ì •ë³´ë¡œ ì €ì¥ë¨<br>
<br>

`myMethod(myInt);`<br>
ë©”ì†Œë“œ í”„ë ˆì„ ì•ˆì—ì„œ parameter í•´ì„<br>
param ë°›ì•˜ìœ¼ë‹ˆ<br>
`int myInt2= param;`ì— ê°’ ë„£ê¸°<br>

ë©”ì†Œë“œ ì•ˆì—ì„œ instanceë¥¼ ìƒì„±í•˜ë©´<br>
`Customer customer2= new Customer("Lee");`<br>
ë©”ì†Œë“œ í”„ë ˆì„ ì•ˆì—ì„œ ì´ë£¨ì–´ì§€ëŠ”ë°<br>
customer2 instanceëŠ” heapì˜ ë©”ëª¨ë¦¬ ê³µê°„ì„ ì°¨ì§€í•˜ê²Œ ë¨<br>
customer2ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œ ê°€ì§€ê²Œ ëœë‹¤.<br>
heapì—ëŠ” í”„ë ˆì„ì´ë¼ëŠ” ê°œë…ì€ ì—†ìŒ âŒ

#### 9ï¸âƒ£ myMethod ë©”ì†Œë“œ ì¢…ë£Œ<br>

ë©”ì†Œë“œ í”„ë ˆì„ì´ ì‚­ì œëœë‹¤.<br>
ê·¸ëŸ¬ë‚˜ mainë©”ì†Œë“œëŠ” ê³„ì† ìš´ì˜ë˜ê³  ìˆìœ¼ë‹ˆ ë‚˜ë¨¸ì§€ stackì€ ìœ ì§€ë˜ê³  ìˆìŒ<br>
<br>
ê·¸ë¦¬ê³  ì•„ê¹Œ instance ì„ ì–¸í–ˆë‹¤ê°€ nullë¡œ ë°”ê¾¼ customer1ì€ heapì— ë©”ëª¨ë¦¬ ì°¨ì§€í•˜ê³  ìˆìŒ, ğŸ—‘ï¸ Garbage collector ë“±ì¥! ğŸ—‘ï¸<br>
ê·¸ëƒ¥ customer1ì„ ê°€ë¦¬í‚¤ëŠ” ë³€ìˆ˜ê°€ stackì— ì—†ì„ ë¿.<br>
<br>
ë§ˆì°¬ê°€ì§€ë¡œ customer2ë„ ë©”ëª¨ë¦¬ì— ì£¼ì†Œê°€ ìˆìœ¼ë‚˜<br>
ë©”ì†Œë“œê°€ ì¢…ë£Œë˜ì—ˆê¸° ë•Œë¬¸ì— customer2ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë³€ìˆ˜ëŠ” stackì˜ í”„ë ˆì„ì— ì—†ìŒ ğŸ—‘ï¸ Garbage collector ë“±ì¥! ğŸ—‘ï¸

#### ğŸ”Ÿ ë©”ì¸ ë©”ì†Œë“œë„ ì¢…ë£Œí•˜ë©´<br>

stack, heapì€ ê¹¨ë—í•˜ê²Œ ë¹„ì›Œì§<br>
ê·¸ëŸ¬ë‚˜ constant poolë§Œ ë‚¨ì•„ ìˆìŒ

## ğŸ’¡ JAVA ê°€ìƒ ë©”ì†Œë“œ ê¸°ìˆ 

```java
        Animal animal= new Animal();
        Animal bird= new Bird(); //upcast
        Animal fish= new Fish();
        Animal person= new Person();

        feed(animal, "bugs");
        feed(animal, "bugs");
        feed(bird, "cherry");
        feed(fish, "shrimp");
        feed(person, "rice");
```

 <br>
ë©”ì†Œë“œëŠ” í•œ ë²ˆë§Œ ë©”ì†Œë“œì˜ì—­ì— ì €ì¥ë˜ê³  ë  <br>
(ë©”ì†Œë“œ feedë¥¼ ì—¬ëŸ¬ë²ˆ í˜¸ì¶œí–ˆë‹¤ê³  ì—¬ëŸ¬ë²ˆ ì €ì¥ë˜ëŠ” ê²ƒì€ ì•„ë‹˜) <br>
 <br>
ì¸ìŠ¤í„´ìŠ¤ typeì„ Animalë¡œ ì„¤ì •í–ˆì–´ë„ <br>
ì›ë˜ëŠ” Bird()ë¼ë©´(upcast) ì‹¤ì œ runtimeë•Œ ì¼ì–´ë‚˜ëŠ” ê²ƒì€ Birdì˜ ë©”ì†Œë“œê°€ ì‹¤í–‰ëœë‹¤.  <br>

## ğŸ—‘ï¸ Garbage collector

ë©”ì†Œë“œê°€ ì¢…ë£Œë˜ì–´ heapì—ëŠ” ì•„ì§ instance ë©”ëª¨ë¦¬ê°€ í• ë‹¹ë˜ì–´ ìˆì§€ë§Œ ê·¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë°”ë¼ë³´ëŠ” ë³€ìˆ˜ëŠ” ì—†ëŠ” ìƒíƒœ <br>
ìœ„ ì½”ë“œì—ì„œ myMethod ë©”ì†Œë“œ ì¢…ë£Œ í›„ `Customer customer2= new Customer("Lee");`ì™€ ê°™ì€ ê²½ìš°ì„ <br>
ì´ëŸ° ê²½ìš° Garbage collectorê°€ heapì—ì„œ ë°°ì •ëœ ë©”ëª¨ë¦¬ ì§€ì›Œë²„ë¦°ë‹¤. ê·¸ë˜ì„œ Heapì„ ë¹„ì›€ <br>
<br>
`System.gc()` <br>
ì´ ì½”ë“œ ì‹¤í–‰ í›„ ë˜ customer2ì´ ì“°ì´ì§€ ì•Šìœ¼ë©´ Garbage collectorê°€ heapì—ì„œ ì§€ì›Œë²„ë¦¼ <br>

### ğŸ—‘ï¸ Garbage collectorì˜ ëŒ€ìƒ íŒë³„ ë°©ë²•

#### âœ”ï¸ reachable: ê°ì²´ê°€ ì°¸ì¡°ë˜ê³  ìˆëŠ” ìƒíƒœ

ê°ì²´ê°€ heapìœ„ì— ë©”ëª¨ë¦¬ í• ë‹¹ë˜ì–´ ì˜¬ë¼ê°€ ìˆëŠ”ê°€? â­•ï¸ <br>
ê·¸ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë³€ìˆ˜ê°€ ìˆëŠ”ê°€? âŒ <br>

#### âœ”ï¸ unreachable: ê°ì²´ê°€ ì°¸ì¡°ë˜ê³  ìˆì§€ ì•Šì€ ìƒíƒœ

ê°ì²´ê°€ heapìœ„ì— ë©”ëª¨ë¦¬ í• ë‹¹ë˜ì–´ ì˜¬ë¼ê°€ ìˆëŠ”ê°€? â­•ï¸ <br>
ê·¸ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë³€ìˆ˜ê°€ ìˆëŠ”ê°€? â­•ï¸ <br>
ğŸ—‘ï¸ Garbage collector ì¶œë™ <br>

### ğŸ—‘ï¸ Garbage collector ì²­ì†Œ ë°©ë²•

#### âœ”ï¸ Mark

ì–´ë–¤ ê°ì²´ê°€ reachableí•œì§€ ì•„ë‹ˆë©´ unreachableí•œì§€ íŒŒì•…í•´ì„œ ì¹˜ìš¸ ê°ì²´ ë§ˆí‚¹ <br>

#### âœ”ï¸ Sweep

unreachable ì´ë¼ê³  ë§ˆí‚¹í•œ ê°ì²´ ì“¸ì–´ ì—†ì• ê¸° <br>

#### âœ”ï¸ Compaction

ì¤‘ê°„ì¤‘ê°„ì— ì¹˜ì›Œì„œ ë¹ˆ ê³µê°„ ìƒê¸°ë©´ ë‚¨ì•„ìˆëŠ” reachableí•œ ê°ì²´ ëª¨ì•„ëª¨ì•„ì„œ ê³µê°„ í™•ë³´ â¡ï¸ ë©”ëª¨ë¦¬ ìµœì í™” <br>

### ğŸ—‘ï¸ Garbage collector ì²­ì†Œ ì¢…ë¥˜

ì‚¬ì‹¤ JAVA GCëŠ” ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ê³  ìˆê³  <br>
ì§ì ‘ GCë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì€ ì•„ì£¼ ë¬´ê±°ìš´ ì‘ì—…ì´ë¼ ì‹¤í–‰í•  ë•Œ ì£¼ì˜ê°€ í•„ìš”í•˜ë‹¤. <br>

#### âœ”ï¸ Minor GC

> based on weak generation hypothesis
> newly created objects are soon useless, reference from old to new object occurs rarely <br>

<br>

young generation <br>
ìƒˆë¡œìš´ ê°ì²´ë“¤ì´ í• ë‹¹ë˜ëŠ” ì˜ì—­ <br>
ì—¬ê¸°ì—ì„œ ì—¬ëŸ¬ ì°¨ë¡€ ì‚´ì•„ë‚¨ìœ¼ë©´ old generationìœ¼ë¡œ ì˜®ê²¨ì§„ë‹¤. <br>
<br>
young generationì€ ìì£¼ ì²­ì†Œë¥¼ í•œë‹¤. <br>
ìì£¼ ìƒê¸°ê³  ì‚¬ë¼ì§€ë‹ˆê¹Œ. <br>
ì˜ì—­ë„ major GCë³´ë‹¤ëŠ” ì‘ì€ í¸ <br>

#### âœ”ï¸ Major GC

old generation <br>
ì—¬ëŸ¬ë²ˆ ì‚¬ìš©ëœ ê°ì²´ë“¤ì´ í• ë‹¹ë˜ëŠ” ì˜ì—­ <br>
Minor GCì— ë¹„í•´ ëœ ìì£¼ ì²­ì†Œ <br>

#### Stop-the-World:

Major GC ì²­ì†Œí•˜ëŠ” ë™ì•ˆ ëª¨ë“  í”„ë¡œê·¸ë¨ ë©ˆì¶°! <br>
Major GCê°€ ì¼ì–´ë‚  ë•Œ Javaì˜ Thread ë™ì‘ì´ ì¼ì‹œì •ì§€í•˜ì—¬ <br>
ì§§ì€ì‹œê°„ Java ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ëŠë ¤ì§€ê²Œ ë˜ëŠ” â€STOP_THE_WORLDâ€ í˜„ìƒì´ ì¼ì–´ë‚˜ê¸°ë„ í•œë‹¤. <br>
