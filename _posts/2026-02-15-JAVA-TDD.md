---
title: Junit and AssertJ
categories: [JAVA, TDD]
tags: [] # TAG names should always be lowercase
---

## âœ… Junit

- framework to help testing
- `assertEquals`

## âœ… AssertJ

- APIs to help testing
- `assertThat().isEqualTo()`
- `assertThat().hasSize()`
- `assertThat().isEmpty()`

## Manual Testing ğŸ†š Automatized Testing

- Manual testing

```java
    @Test
    void add(){
        CafeKiosk cafeKiosk = new CafeKiosk();
        cafeKiosk.add(new Americano());

        System.out.println(">>> Get total bev num: " + cafeKiosk.getBeverages().size());
        System.out.println(">>> Get bev name: " + cafeKiosk.getBeverages().get(0).getName());
    }
```

- Automatized testing

```java
    @Test
    void add() {
        CafeKiosk cafeKiosk = new CafeKiosk();
        cafeKiosk.add(new Americano());

        assertThat(cafeKiosk.getBeverages().size()).isEqualTo(1);
        assertThat(cafeKiosk.getBeverages()).hasSize(1);

        assertThat(cafeKiosk.getBeverages().get(0).getName()).isEqualTo("Americano");
    }
```

## JUnit ğŸ†š AssertJ

```java
    @Test
    void getName() {
        Americano americano = new Americano();
        //JunitAPI
        assertEquals(americano.getName(), "Americano");

        //AssertJ
        assertThat(americano.getName()).isEqualTo("Americano");
    }
```

## âœ… Examples of simple test code

#### â˜‘ï¸ Add one beverage

- âœ”ï¸ production code

```java
private final List<Beverage> beverages = new ArrayList<>();

public void add(Beverage beverage) {
        beverages.add(beverage);
    }
```

- âœ”ï¸ test code

```java
@Test
void add() {
    CafeKiosk cafeKiosk = new CafeKiosk();
    cafeKiosk.add(new Americano());
    assertThat(cafeKiosk.getBeverages().size()).isEqualTo(1);
    assertThat(cafeKiosk.getBeverages()).hasSize(1);
    assertThat(cafeKiosk.getBeverages().get(0).getName()).isEqualTo("Americano");
}
```

#### â˜‘ï¸ Add several beverages

- âœ”ï¸ production code

```java
    public void add(Beverage beverage, int count){
        if(count <= 0){
            throw new IllegalStateException("Can order more than one drink");
        }
        for (int i = 0; i < count; i++) {
            beverages.add(beverage);
        }
    }
```

- âœ”ï¸ test code

```java
@Test
void addSeveral() {
    CafeKiosk cafeKiosk = new CafeKiosk();
    Americano americano = new Americano();
    cafeKiosk.add(americano, 10);

    assertThat(cafeKiosk.getBeverages()).hasSize(10);
    assertThat(cafeKiosk.getBeverages().get(0).getName()).isEqualTo("Americano");
    assertThat(cafeKiosk.getBeverages().get(0)).isEqualTo(americano);
    assertThat(cafeKiosk.getBeverages().get(1)).isEqualTo(americano);
}
```

#### â˜‘ï¸ Remove a beverage

- âœ”ï¸ production code

```java
    public void remove(Beverage beverage) {
        beverages.remove(beverage);
    }

```

- âœ”ï¸ test code

```java
@Test
void remove() {
  CafeKiosk cafeKiosk = new CafeKiosk();
  Americano americano = new Americano();
  cafeKiosk.add(americano);
  assertThat(cafeKiosk.getBeverages()).hasSize(1);

  cafeKiosk.remove(americano);
  assertThat(cafeKiosk.getBeverages()).hasSize(0);
  assertThat(cafeKiosk.getBeverages()).isEmpty();
}
```

#### â˜‘ï¸ Clear all added beverages

- âœ”ï¸ production code

```java
    public void clear() {
        beverages.clear();
    }

```

- âœ”ï¸ test code

```java
@Test
void clear() {
  CafeKiosk cafeKiosk = new CafeKiosk();
  cafeKiosk.add(new Americano());
  cafeKiosk.add(new Latte());
  assertThat(cafeKiosk.getBeverages()).hasSize(2);

  cafeKiosk.clear();
  assertThat(cafeKiosk.getBeverages()).isEmpty();
}
```

#### â˜‘ï¸ Calculate total price

- âœ”ï¸ production code

```java
public int calculateTotalPrice() {
        int total = 0;
        for (Beverage beverage : beverages) {
            total += beverage.getPrice();
        }
        return total;
    }
```

- âœ”ï¸ test code

```java
@Test
void getTotalPrice() {
    CafeKiosk cafeKiosk = new CafeKiosk();
    cafeKiosk.add(new Americano());
    cafeKiosk.add(new Latte());

    assertThat(cafeKiosk.calculateTotalPrice()).isEqualTo(9000);
}
```

## ğŸ’¥ If method throws exception

- âœ”ï¸ production code
- if `count <= 0` cannot add to beverages list

```java
    public void add(Beverage beverage, int count){
        if(count <= 0){
            throw new IllegalStateException("Can order more than one drink");
        }
        for (int i = 0; i < count; i++) {
            beverages.add(beverage);
        }
    }
```

- âœ”ï¸ test code

```java
    @Test
    void addException() {
        CafeKiosk cafeKiosk = new CafeKiosk();
        Americano americano = new Americano();
        assertThatThrownBy(()-> cafeKiosk.add(americano, 0))
          .isInstanceOf(IllegalStateException.class)
          .hasMessage("Can order more than one drink");
    }
```

## âš ï¸ When an outside factor needs to be tested with exception

- outside factor: time
- when creating order,
- if `current time` is outside `cafe open time`, throw exception

- âœ”ï¸ production code
- ğŸ’Š send `current time` as parameter

```java
public Order createOrder(LocalDateTime currentDateTime){
        LocalTime currentTime = currentDateTime.toLocalTime();

        if(currentTime.isBefore(CAFE_OPEN_TIME) || currentTime.isAfter(CAFE_CLOSE_TIME)){
            throw new IllegalStateException("This is not order time. Inquire to manager");
        }


        return new Order(currentDateTime, beverages);
    }
```

- âœ”ï¸ test code

```java
// inside cafe open time, no exception
@Test
    void createOrderWithCurrentTime() {
        CafeKiosk cafeKiosk = new CafeKiosk();
        Americano americano = new Americano();
        cafeKiosk.add(americano);

        // ğŸ’Š send current time as parameter in production code
        Order order = cafeKiosk.createOrder(LocalDateTime.of(2026, 2, 16, 12, 40));

        assertThat(order.getBeverages()).hasSize(1);
        assertThat(order.getBeverages().get(0).getName()).isEqualTo("Americano");
    }

// outside cafe open time, ğŸ’¥ throw exception
@Test
    void createOrderOutsideCurrentTime() {
        CafeKiosk cafeKiosk = new CafeKiosk();
        Americano americano = new Americano();
        cafeKiosk.add(americano);

        // ğŸ’Š send current time as parameter in production code
        assertThatThrownBy(()->cafeKiosk.createOrder(LocalDateTime.of(2026, 2, 16, 9, 59)))
                .isInstanceOf(IllegalStateException.class)
                .hasMessage("This is not order time. Inquire to manager");
    }
```

## âœ…

- âœ”ï¸ production code

```java

```

- âœ”ï¸ test code

```java

```
